{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/action.js","webpack:///./src/main.js","webpack:///./src/index.js"],"names":["GET_DEFAULT","url","params","Promise","res","rej","xhr","XMLHttpRequest","data","key","push","window","encodeURIComponent","join","onreadystatechange","readyState","status","JSON","parse","response","open","send","GET_DEFAULT_CROSS","param","qs","stringify","arrayFormat","axios","method","xsrfCookieName","xsrfHeaderName","withCredentials","HOST","GET_WECHAT_SIGN","wxid","RegExp","prototype","execAll","str","map","result","exec","lastIndex","WechatHelper","constructor","options","appId","apis","hideMenuList","onSuccess","onFail","debug","ver","wxApiReady","shareList","init","inWechat","spt","document","createElement","type","onload","ret","location","href","split","console","log","wx","ready","hideMenuItems","menuList","length","setShare","pop","error","config","timestamp","nonceStr","signature","jsApiList","src","protocol","body","appendChild","title","desc","link","imgUrl","success","updateAppMessageShareData","updateTimelineShareData","onMenuShareWeibo","getSearch","search","Object","hasOwnProperty","call","ua","navigator","userAgent","toLowerCase","match","toRedirect","req","redirect","replace","toAuth","needHead","redirect_uri","wxAuth","getAuth","code","state","needAuth"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wechat-helper\"] = factory();\n\telse\n\t\troot[\"wechat-helper\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// import axios from 'axios';\n// import qs from 'qs';\n\n\nfunction GET_DEFAULT(url,params){\n  return new Promise((res,rej)=>{\n    var xhr = new XMLHttpRequest();\n    var data=[];\n    if(params){\n      for(let key in params){\n        data.push(`${window.encodeURIComponent(key)}=${window.encodeURIComponent(params[key])}`);\n      }\n      data=data.join('&');\n    }\n    var onreadystatechange=function(){\n      if(xhr.readyState===4){\n        if(xhr.status===200){\n          res(JSON.parse(xhr.response));\n        }else{\n          rej();\n        }\n      }\n    }\n    url = data?`${url}?${data}`:url;\n    xhr.open('GET',url,true);\n    xhr.onreadystatechange=onreadystatechange;\n    xhr.send(null);\n  })\n  \n}\n\n// async function GET_DEFAULT(url, param) {\n//   if (param) param = qs.stringify(param, { arrayFormat: 'indices' });\n\n//   let response = await axios({\n//     method: 'get',\n//     url: param ? `${url}?${param}` : url,\n//   });\n//   return response && response.data ? response.data : null;\n// }\n\nasync function GET_DEFAULT_CROSS(url, param) {\n  if (param) param = qs.stringify(param, { arrayFormat: 'indices' });\n\n  let response = await axios({\n    method: 'get',\n    xsrfCookieName: '',\n    xsrfHeaderName: '',\n    withCredentials: true,\n    url: param ? `${url}?${param}` : url,\n  });\n  return response && response.data ? response.data : null;\n}\n\n/**************************************************************************\n *                  基础共享接口\n *************************************************************************/\n\nconst HOST = 'https://m.vuedata.cn';\nexport async function GET_WECHAT_SIGN(params={\n  wxid:'',\n  url:'',\n\n}) {\n  return GET_DEFAULT(HOST + '/ndapp/wx/jsApiSign', params);\n}\n","import { GET_WECHAT_SIGN } from './action.js';\n// import './main.scss';\n\nRegExp.prototype.execAll = function (str) {\n  let map = {};\n  let result = null;\n  do {\n    result = this.exec(str);\n    if (result) map[result[1]] = result[2];\n  } while (this.lastIndex != 0);\n  return map;\n};\n\nclass WechatHelper {\n  constructor(options) {\n    const {wxid,appId,apis,hideMenuList,onSuccess,onFail,debug} = options;\n    this.ver = '0.0.1';\n    this.wxid = wxid;\n    this.appId = appId;\n    this.wxApiReady = false;\n    this.shareList = [];\n    this.apis = apis||[\n      'updateAppMessageShareData',\n      'updateTimelineShareData',\n      'onMenuShareAppMessage',\n      'onMenuShareTimeline',\n      'hideOptionMenu',\n      'hideMenuItems',\n      'onMenuShareWeibo',\n      'onMenuShareQZone'\n    ];\n    this.init({wxid,appId,apis,hideMenuList,onSuccess,onFail,debug})\n  }\n\n  init(options) {\n    const {wxid,appId,apis,hideMenuList,onSuccess,onFail,debug=false} = options;\n    if (this.inWechat()) {\n      let spt = document.createElement('script');\n      spt.type = 'text/javascript';\n      spt.onload = async () => {\n        let ret = await GET_WECHAT_SIGN({ wxid:wxid, url: location.href.split('#')[0] });\n        \n        if (ret) {\n          console.log(`[wechat-helper]jsapi签名结果:${JSON.stringify(ret)}`);\n          wx.ready(()=> {\n            console.log('[wechat-helper]jsapi wx ready');\n            this.wxApiReady = true;\n            if(hideMenuList){\n              wx.hideMenuItems({\n                menuList: hideMenuList,\n              });\n            }\n            if (this.shareList && this.shareList.length > 0) {\n              this.setShare(this.shareList.pop());\n            }\n            if(onSuccess){\n              onSuccess();\n            }\n\n          });\n          wx.error( (res)=> {\n            console.log(`[wechat-helper]jsapi wx fail:${JSON.stringify(res)}`);\n            if (onFail) {\n              onFail('微信初始化失败:' + JSON.stringify(res));\n            }\n          });\n          wx.config({\n            debug: debug, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n            appId: appId, // 必填，公众号的唯一标识\n            timestamp: ret.timestamp, // 必填，生成签名的时间戳\n            nonceStr: ret.nonceStr, // 必填，生成签名的随机串\n            signature: ret.signature, // 必填，签名\n            jsApiList:apis, // 必填，需要使用的JS接口列表\n          });\n          \n        }else{\n          console.log('[wechat-helper]jsapi签名失败');\n        }\n      };\n      spt.src = location.protocol + '//res.wx.qq.com/open/js/jweixin-1.6.0.js';\n      document.body.appendChild(spt);\n    }else{\n      console.log('[wechat-helper]请到微信浏览器进行jsapi申请');\n    }\n  }\n\n  setShare(options) {\n    const { title, desc, link, imgUrl, success } = options;\n    if (this.wxApiReady) {\n      console.log(`[wechat-helper]设置分享内容:${JSON.stringify(options)}`);\n      wx.updateAppMessageShareData({\n        title, // 分享标题\n        desc, // 分享描述\n        link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n        imgUrl, // 分享图标\n        success,\n      });\n      wx.updateTimelineShareData({\n        title, // 分享标题\n        link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n        imgUrl, // 分享图标\n        success,\n      });\n      wx.onMenuShareWeibo({\n        title, // 分享标题\n        desc, // 分享描述\n        link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n        imgUrl, // 分享图标\n        success,\n      }); \n    } else {\n      console.log(`[wechat-helper]设置分享内容-未加载延迟设置:${JSON.stringify(options)}`);\n      this.shareList.pop();\n      this.shareList.push(options);\n    }\n  }\n\n  getSearch(url) {\n    if (!url) url = location.href;\n    let search = /([^&?#]+)=([^&?#]+)/g.execAll(url);\n    for (let key in search) {\n      if (Object.prototype.hasOwnProperty.call(search, key)) {\n        search[key] = window.encodeURIComponent(search[key]);\n      }\n    }\n    return search;\n  }\n\n  inWechat() {\n    let ua = navigator.userAgent.toLowerCase();\n    if (ua.match(/MicroMessenger/i) == 'micromessenger') {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  toRedirect() {\n    let req = this.getSearch();\n    console.log(`[wechat-helper]toRedirect跳转页面:${req.redirect}`);\n    location.replace(req.redirect);\n  }\n  toAuth(url, needHead) {\n    const { appId } = this;\n    let type = 'snsapi_base';\n    if (needHead) {\n      type = 'snsapi_userinfo';\n    }\n    let redirect_uri = window.encodeURIComponent(url);\n    let wxAuth = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appId}&redirect_uri=${redirect_uri}&response_type=code&scope=${type}&state=wxauthsuccess#wechat_redirect`;\n    return wxAuth;\n  }\n  \n  getAuth(needHead) {\n    let req = this.getSearch();\n    if(this.inWechat() ){\n      if ( !req.code || !req.state || req.state != 'wxauthsuccess') {\n        let wxAuth = this.toAuth(location.href, needHead);\n        console.log(`[wechat-helper]还未授权，即将前往:${wxAuth}`);\n        return { needAuth: true, url: wxAuth };\n      } else {\n        console.log(`[wechat-helper]已授权，code:${req.code}`);\n        return { needAuth: false,code:req.code };\n      }\n    }else{\n      console.log('[wechat-helper]请在微信浏览器运行');\n    }\n    return { needAuth: false };\n  }\n\n  \n}\n\nexport default WechatHelper;\n","import WechatHelper from './main.js';\n\nexport default WechatHelper;\n"],"sourceRoot":""}